:root {
  /* Light Theme (Default) */
  --bg-color: #ffffff;
  --text-color: #2e2e2e;
  --text-muted: #383838;
  --link-color: var(--text-color);
  --link-hover-color: #101010;
  --link-visited-color: #101010;
  --footer-bg: #f8f9faaa; /* Light footer */
  --footer-text: #343a40;
  --footer-heading: #212529;
  --footer-link: #384044;
  --footer-link-hover: #212529;
  --footer-copyright: #6c757d;
  --dynamic-bg-opacity: 0.3;

  /* Button Download Hover */
  --button-hover-bg: #55555516;
  --button-hover-text: #121212;
  --button-border-color: #55555599;
  --button-border-hover-color: #121212cc;

  --card-border-color: var(--button-border-color);

  --timeline-marker-border-color: #333;
  --timeline-marker-bg-color: #333;
  --timeline-line-color: #3333;

  --font-family-serif: "EB Garamond", Garamond, "Times New Roman", serif;
  --font-family-sans:
    "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif,
    "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
}

html.dark {
  /* Dark Theme Overrides */
  --bg-color: #121212; /* Slightly off-black */
  --text-color: #e3e3e3;
  --text-muted: #d4d4d4;
  --link-color: var(--text-color);
  --link-hover-color: #fff;
  --link-visited-color: #fff;
  --footer-bg: #161616aa;
  --footer-text: #cccccc;
  --footer-heading: #eeeeee;
  --footer-link: #cccccc;
  --footer-link-hover: #ffffff;
  --footer-copyright: #888888;
  --dynamic-bg-opacity: 0.4;

  /* Button Download Hover */
  --button-hover-bg: #cccccc26;
  --button-hover-text: #fff;
  --button-border-color: #cccccc99;
  --button-border-hover-color: #ffffffcc;

  --card-border-color: var(--button-border-color);

  --timeline-marker-border-color: #cccccc;
  --timeline-marker-bg-color: #cccccc;
  --timeline-line-color: #cccccc33;
}

html {
  /* Ensure no overscroll rule here */
  background-color: var(--bg-color); /* Use CSS variable */
}

html,
body {
  margin: 0;
  width: 100%;
  height: 100%;
  font-family: var(--font-family-serif);
  color: var(--text-color); /* Apply base text color */
  /* Ensure smooth transitions for color changes */
  transition:
    background-color 0.3s ease,
    color 0.3s ease;
}

.page-wrapper {
  height: 100vh;
  overflow-y: auto;
  position: relative; /* Context for absolutely positioned children if needed */
  overscroll-behavior-y: contain;
}

.main-content {
  min-height: 100vh;
  padding: 0;
}

@media (min-width: 768px) {
  .main-content {
    padding: 0 10vw;
  }
}

/* --- Animation Styles --- */

/* == Scroll Reveal Animation (Triggered by JS Intersection Observer) == */
.scroll-reveal-animate {
  /* Initial state */
  opacity: 0;
  filter: blur(5px);
  transform: translateY(20px) translateZ(0);
  will-change: opacity, filter, transform;
  /* Transition applied when .visible is added */
  transition:
    opacity 0.8s ease-out,
    filter 0.8s ease-out,
    transform 0.8s ease-out;
}
.scroll-reveal-animate.visible {
  /* Final state */
  opacity: 1;
  filter: blur(0px);
  transform: translateY(0) translateZ(0);
}

/* == Page Load Animation (Triggered by CSS Animation on element load/re-insertion) == */
.page-load-initial-state {
  /* Initial state ONLY (no transition here) */
  opacity: 0;
  filter: blur(5px);
  transform: translateY(20px) translateZ(0);
  will-change: opacity, filter, transform;
}

@keyframes pageLoadAnimate {
  to {
    /* Final state */
    opacity: 1;
    filter: blur(0px);
    transform: translateY(0) translateZ(0);
  }
}

/* Base link style */
a {
  color: var(--text-color);
  text-decoration: underline; /* Add default underline */
  text-underline-offset: 0.2em; /* Add default offset */
  transition: color 0.2s ease;
}

/* Hover and focus style */
a:hover,
a:focus,
a:active {
  color: var(--link-hover-color);
  text-decoration: underline; /* Ensure underline persists */
  text-underline-offset: 0.2em; /* Ensure offset persists */
}
