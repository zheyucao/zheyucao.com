---
import SubPageLayout from "../layouts/SubPageLayout.astro";
import DocumentSectionRenderer from "../components/document/DocumentSectionRenderer.astro";
import PageActions from "../components/common/PageActions.astro";
import { getDocumentViewModel } from "../viewmodels/documentViewModel";

const { mainColumn, sidebar, metadata } = await getDocumentViewModel();
const { title, actions } = metadata;
---

<SubPageLayout title={title} description={metadata.description} seo={metadata.seo}>
  <PageActions slot="actions" actions={actions} />

  <div class="resume-container">
    <div class="main-column">
      {mainColumn.map((section) => <DocumentSectionRenderer section={section} />)}
    </div>

    <aside class="sidebar">
      {sidebar.map((section) => <DocumentSectionRenderer section={section} />)}
    </aside>
  </div>
</SubPageLayout>

<style>
  .resume-container {
    display: grid;
    grid-template-columns: 1fr 240px;
    gap: 4rem;
    max-width: 1200px;
    margin: 0 auto;
  }

  .main-column {
    min-width: 0;
    font-size: 1.2rem;
  }

  .sidebar {
    position: sticky;
    top: 2rem;
    height: fit-content;
    font-size: 1.2rem;
  }

  @media (max-width: 1200px) {
    .resume-container {
      grid-template-columns: 1fr;
      gap: 3rem;
    }

    .sidebar {
      position: static;
    }
  }
</style>
