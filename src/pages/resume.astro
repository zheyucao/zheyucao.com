---
import SubPageLayout from "../layouts/SubPageLayout.astro";
import ResumeSectionRenderer from "../components/resume/ResumeSectionRenderer.astro";
import Button from "../components/common/Button.astro";
import { resumeData } from "../data/resumeData";

const { download, mainColumn, sidebar } = resumeData;
---

<SubPageLayout title="Résumé">
  <Button
    slot="actions"
    href={download.href}
    text={download.text}
    style="primary"
    download={download.filename}
    icon="↓"
    iconPosition="left"
    target="_blank"
    rel="noopener noreferrer"
    noMargin={true}
    wrapperClass="page-load-initial-state"
  />

  <div class="resume-container">
    <div class="main-column">
      {mainColumn.map((section) => <ResumeSectionRenderer section={section} />)}
    </div>

    <aside class="sidebar">
      {sidebar.map((section) => <ResumeSectionRenderer section={section} />)}
    </aside>
  </div>
</SubPageLayout>

<style>
  .resume-container {
    display: grid;
    grid-template-columns: 1fr 240px;
    gap: 4rem;
    max-width: 1200px;
    margin: 0 auto;
  }

  .main-column {
    min-width: 0; /* Prevent overflow in grid items */
  }

  .sidebar {
    position: sticky;
    top: 2rem;
    height: fit-content;
  }

  .download-section {
    margin-bottom: 3rem;
  }

  @media (max-width: 900px) {
    .resume-container {
      grid-template-columns: 1fr;
      gap: 3rem;
    }

    .sidebar {
      position: static;
    }

    /* But maybe we want contact info at bottom on mobile? 
       For now, let's keep it simple. The user can reorder in data if needed. 
       Actually, typically download is top, contact is top or bottom. 
       With the current data structure, sidebar has both. 
    */
  }
</style>
