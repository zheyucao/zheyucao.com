---

---

<div id="scroll-indicator" class="scroll-indicator">
  <div class="indicator-content">
    <svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path
        d="M7 10L12 15L17 10"
        stroke="currentColor"
        stroke-width="1"
        stroke-linecap="round"
        stroke-linejoin="round"></path>
    </svg>
  </div>
</div>

<style>
  @keyframes float {
    0% {
      transform: translateY(0px);
    }
    50% {
      transform: translateY(-8px);
    }
    100% {
      transform: translateY(0px);
    }
  }

  .scroll-indicator {
    position: fixed;
    bottom: 50px;
    left: 50%;
    /* transform: translateX(-50%) translateZ(0); */ /* Remove layer promotion */
    transform: translateX(-50%);
    /* will-change: transform, opacity; */ /* Remove will-change */
    color: var(--text-color);
    opacity: 0;
    cursor: pointer;
    z-index: 10;
    transition: opacity 0.5s ease-out;
  }

  .indicator-content {
    display: flex;
    align-items: center;
    gap: 0em;
    /* animation: float 3s ease-in-out infinite; */ /* Temporarily disable float animation */
    animation: float 3s ease-in-out infinite; /* Restore float animation */
  }

  .scroll-indicator svg {
    display: block;
    margin-bottom: 2px;
  }

  .scroll-indicator.visible {
    opacity: 0.6;
  }
</style>

<script>
  import {
    setupScrollIndicator,
    setupScrollIndicatorClick,
  } from "../lib/animations/scrollIndicator";

  let cleanup = null;
  let clickCleanup = null;

  document.addEventListener("astro:page-load", () => {
    const indicator = document.querySelector("#scroll-indicator");
    const scroller = document.querySelector(".page-wrapper");

    if (indicator && scroller) {
      // Setup animations and click handler
      cleanup = setupScrollIndicator({ indicator, scroller });
      clickCleanup = setupScrollIndicatorClick({ indicator, scroller });
    }
  });

  // Cleanup on navigation
  document.addEventListener("astro:before-swap", () => {
    if (cleanup) cleanup();
    if (clickCleanup) clickCleanup();
    cleanup = null;
    clickCleanup = null;
  });
</script>
