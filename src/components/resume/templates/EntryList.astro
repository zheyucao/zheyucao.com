---
import RichText from "../../common/RichText.astro";
import type { AstroComponentFactory } from "astro/runtime/server/index.js";

export interface EntryItem {
  title: string;
  subtitle?: string;
  date?: string;
  details?: string[];
  Content?: AstroComponentFactory;
}

interface Props {
  title: string;
  entries: EntryItem[];
  variant?: "default" | "education" | "experience" | "awards" | "projects";
}

const { title, entries, variant = "default" } = Astro.props;
---

<section class="resume-section scroll-reveal-animate mb-12">
  <h2
    class="text-[clamp(1.8rem,1.5rem+1.5vw,2.8rem)] mb-6 font-semibold border-b border-text-muted pb-2"
  >
    {title}
  </h2>
  {
    entries.map((entry, index) => (
      <div class:list={["mb-4", index === entries.length - 1 && "!mb-0"]}>
        <div class="flex justify-between flex-wrap text-[1.4rem] items-baseline sm:flex-row flex-col items-start">
          <span class="font-normal mr-2">
            <RichText content={entry.title} />
          </span>
          {entry.date && (
            <span class="font-sans text-text-muted text-base whitespace-nowrap sm:mt-0 mt-[0.3rem]">
              {entry.date}
            </span>
          )}
        </div>
        {entry.subtitle && (
          <div class="text-[1.2rem] mb-[0.2rem] [&_p]:m-0">
            <RichText content={entry.subtitle} />
          </div>
        )}
        {entry.Content ? (
          <div class="mt-[0.8rem] text-base leading-[1.6] [&_p]:mt-0 [&_p]:mb-2 [&_p:last-child]:mb-0">
            <entry.Content />
          </div>
        ) : entry.details ? (
          <div class="mt-[0.8rem] text-base leading-[1.6] [&_p]:mt-0 [&_p]:mb-2 [&_p:last-child]:mb-0">
            <RichText content={entry.details} />
          </div>
        ) : null}
      </div>
    ))
  }
</section>
