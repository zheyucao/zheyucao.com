---
import sanitizeHtml from "sanitize-html";

interface Props {
  data: {
    greeting: string;
    name: string;
    description: string;
  };
}

const { data } = Astro.props;
const { greeting, name, description } = data;

const sanitize = (value: string) =>
  sanitizeHtml(value || "", {
    allowedTags: ["em", "strong", "br", "span"],
    allowedAttributes: {
      span: [],
    },
  });

const safeGreeting = sanitize(greeting);
const safeName = sanitize(name);
const safeDescription = sanitize(description);
---

<section class="hero-section">
  <div class="hero-content">
    <div class="hero-greeting" set:html={safeGreeting} />
    <div class="hero-name" set:html={safeName} />
    <div class="hero-description" set:html={safeDescription} />
  </div>
  <!-- Scroll Down Icon Removed -->
</section>

<style>
  /* Styles moved from index.astro, now scoped to Hero component */
  @keyframes unblurFadeIn {
    0% {
      filter: blur(32px);
      opacity: 0;
    }
    10% {
      filter: blur(28px);
      opacity: 0.1;
    }
    50% {
      filter: blur(4px);
      opacity: 0.9;
    }
    100% {
      filter: blur(0px);
      opacity: 0.9;
    }
  }

  .hero-section {
    min-height: 100vh;
    display: flex;
    justify-content: flex-start;
    align-items: center;
    padding-left: 10%;
    box-sizing: border-box;
  }

  .hero-content {
    max-width: 80%;
    transform: translateY(-5vh);
  }

  .hero-greeting {
    font-family: var(--font-family-serif);
    font-size: clamp(1.5rem, 1.5rem + 2vw, 4rem);
    /* font-style: italic; */
    color: var(--text-muted);
    margin-bottom: 10px;
    line-height: 1;
    opacity: 0;
    margin-left: 10px;
    animation: unblurFadeIn 2s ease-out forwards;
  }

  .hero-name {
    font-family: var(--font-family-serif);
    color: var(--text-color);
    font-size: clamp(3rem, 4rem + 4vw, 8rem);
    font-weight: 400;
    line-height: 1;
    margin: 0;
    opacity: 0;
    animation: unblurFadeIn 2s ease-out 0.5s forwards;
  }

  .hero-description {
    color: var(--text-color);
    font-family: var(--font-family-serif);
    font-size: clamp(1.5rem, 1rem + 1vw, 2rem);
    font-weight: 400;
    line-height: 1.4;
    margin-top: 2em;
    margin-left: 10px;
    max-width: 90%;
    opacity: 0;
    animation: unblurFadeIn 2s ease-out 0.8s forwards;
  }

  .hero-description em {
    font-weight: 600;
  }
</style>
