---
// src/components/home/FeaturedProjectCard.astro
// Based on src/components/projects/ProjectCard.astro, adapted for homepage horizontal scroll

import RichText from "../common/RichText.astro";

interface Props {
  title: string;
  homepageSummary?: string; // Use concise summary
  slug: string; // Slug for linking to the project page
  isDoubleColumn?: boolean;
}

const {
  title,
  homepageSummary = "Click to learn more...", // Default summary
  slug,
  isDoubleColumn = false,
} = Astro.props;

// Construct URL with query parameter instead of hash
const projectUrl = `/projects?scrollTo=${encodeURIComponent(slug)}`;
---

<a
  href={projectUrl}
  class:list={[
    "featured-card flex items-stretch w-full min-h-16 rounded-[10px] overflow-hidden border border-card-border",
    { "lg:w-[clamp(20vw,25vw,30vw)]": isDoubleColumn },
  ]}
>
  <div class="flex-1 relative min-w-0 text-text p-4 pl-5">
    <h4 class="text-[1.25rem] font-normal m-0 mb-[0.4rem] leading-[1.3] text-text whitespace-nowrap overflow-hidden text-ellipsis pr-8">
      {title}
    </h4>
    <RichText tag="p" class="summary text-base leading-[1.5] m-0" inline content={homepageSummary} />
  </div>
</a>

<style>
  /* Card appearance and hover states - kept in CSS for transitions */
  .featured-card {
    text-decoration: none;
    background-color: var(--theme-card-bg);
    box-shadow: var(--theme-shadow-sm);
    transition:
      transform 0.25s ease-out,
      box-shadow 0.25s ease-out,
      border-color 0.2s ease;
    will-change: auto;
  }

  .featured-card:hover,
  .featured-card:focus-visible {
    box-shadow: var(--theme-shadow-lg);
    border-color: var(--card-border-hover-color);
    outline: none;
  }

  /* Summary text styling */
  .featured-card :global(.summary) {
    color: var(--theme-text-lighter);
    overflow: hidden;
    text-overflow: ellipsis;
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
  }
</style>
