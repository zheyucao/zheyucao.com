---
import Button from "./Button.astro";
import type { PageAction } from "../../lib/viewmodels/baseViewModel";

type ButtonVariant = "default" | "primary" | "subtle";

interface Props {
  actions?: PageAction[];
}

const { actions = [] } = Astro.props;

const allowedVariants = new Set<ButtonVariant>(["default", "primary", "subtle"]);

function normalizeVariant(
  value: PageAction["variant"] | PageAction["style"]
): ButtonVariant | undefined {
  if (!value) return undefined;
  return allowedVariants.has(value as ButtonVariant) ? (value as ButtonVariant) : undefined;
}
---

{
  actions.map((action) => (
    <Button
      slot="actions"
      href={action.href}
      text={action.text}
      variant={normalizeVariant(action.variant ?? action.style)}
      download={action.download}
      icon={action.icon}
      iconPosition={action.iconPosition}
      target={action.target}
      rel={action.rel}
      noMargin={true}
      wrapperClass="page-load-initial-state"
    />
  ))
}
