import{A as R}from"./animationConstants.C5dRCtVd.js";import{r as _,g as n,S as T}from"./gsapPlugins.CTnM-_Tl.js";import{p as f}from"./motionPreferences.BL4Q8pbc.js";_();function g(i){const{indicator:t,scroller:e}=i,{SCROLL_INDICATOR:o,GSAP:c}=R;if(f())return t.style.display="none",()=>{};let l=null,a=null,r=null;const m=n.fromTo(t,{opacity:.6},{opacity:0,immediateRender:!1});l=T.create({trigger:e,scroller:e,start:`${o.SCROLL_TRIGGER_START}px top`,end:`+=${o.SCROLL_TRIGGER_END_OFFSET}`,animation:m,scrub:c.INDICATOR_SCRUB});const d=(I=0)=>{l?.isActive||(r!==null&&clearTimeout(r),r=setTimeout(()=>{e.scrollTop<o.SCROLL_TRIGGER_START&&n.to(t,{opacity:.6,duration:.5,overwrite:!0})},I))},p=()=>{r!==null&&clearTimeout(r),l?.isActive||n.to(t,{opacity:0,duration:o.FADE_OUT_DURATION/1e3,overwrite:!0})};return n.set(t,{opacity:0}),e.scrollTop<o.SCROLL_TRIGGER_START&&d(o.FADE_IN_DELAY),a=T.create({trigger:e,scroller:e,start:`${o.SCROLL_TRIGGER_START}px top`,onEnter:p,onLeaveBack:()=>{e.scrollTop<5?p():d(o.FADE_IN_DELAY)}}),()=>{l&&(l.kill(),l=null),a&&(a.kill(),a=null),r!==null&&(clearTimeout(r),r=null)}}function A(i){const{indicator:t,scroller:e}=i,{SCROLL_INDICATOR:o}=R,c=()=>{if(f()){e.scrollTo({top:e.scrollTop+e.clientHeight,behavior:"auto"});return}parseFloat(window.getComputedStyle(t).opacity)>.1&&n.to(e,{duration:o.SCROLL_DURATION,scrollTo:e.scrollTop+e.clientHeight,ease:"power2.out"})};return t.addEventListener("click",c),()=>{t.removeEventListener("click",c)}}let s=null,u=null;const S=()=>{const i=document.querySelector("#scroll-indicator"),t=document.querySelector(".page-wrapper");i&&t&&(s=g({indicator:i,scroller:t}),u=A({indicator:i,scroller:t}))},L=()=>{s&&s(),u&&u(),s=null,u=null,document.removeEventListener("astro:page-load",S),document.removeEventListener("astro:before-swap",L)};document.addEventListener("astro:page-load",S);document.addEventListener("astro:before-swap",L);
