import{A as R}from"./animationConstants.C5dRCtVd.js";import{r as I,g as c,S as d}from"./gsapPlugins.CTnM-_Tl.js";import{p as S}from"./motionPreferences.BL4Q8pbc.js";I();function _(i){const{indicator:e,scroller:t}=i,{SCROLL_INDICATOR:r,GSAP:n}=R;if(S())return c.set(e,{opacity:.6}),()=>{};let l=null,a=null,o=null;const f=c.fromTo(e,{opacity:.6},{opacity:0,immediateRender:!1});l=d.create({trigger:t,scroller:t,start:`${r.SCROLL_TRIGGER_START}px top`,end:`+=${r.SCROLL_TRIGGER_END_OFFSET}`,animation:f,scrub:n.INDICATOR_SCRUB});const T=(L=0)=>{l?.isActive||(o!==null&&clearTimeout(o),o=setTimeout(()=>{t.scrollTop<r.SCROLL_TRIGGER_START&&c.to(e,{opacity:.6,duration:.5,overwrite:!0})},L))},p=()=>{o!==null&&clearTimeout(o),l?.isActive||c.to(e,{opacity:0,duration:r.FADE_OUT_DURATION/1e3,overwrite:!0})};return c.set(e,{opacity:0}),t.scrollTop<r.SCROLL_TRIGGER_START&&T(r.FADE_IN_DELAY),a=d.create({trigger:t,scroller:t,start:`${r.SCROLL_TRIGGER_START}px top`,onEnter:p,onLeaveBack:()=>{t.scrollTop<5?p():T(r.FADE_IN_DELAY)}}),()=>{l&&(l.kill(),l=null),a&&(a.kill(),a=null),o!==null&&(clearTimeout(o),o=null)}}function m(i){const{indicator:e,scroller:t}=i,{SCROLL_INDICATOR:r}=R,n=()=>{if(S()){t.scrollTo({top:t.scrollTop+t.clientHeight,behavior:"auto"});return}parseFloat(window.getComputedStyle(e).opacity)>.1&&c.to(t,{duration:r.SCROLL_DURATION,scrollTo:t.scrollTop+t.clientHeight,ease:"power2.out"})};return e.addEventListener("click",n),()=>{e.removeEventListener("click",n)}}let s=null,u=null;document.addEventListener("astro:page-load",()=>{const i=document.querySelector("#scroll-indicator"),e=document.querySelector(".page-wrapper");i&&e&&(s=_({indicator:i,scroller:e}),u=m({indicator:i,scroller:e}))});document.addEventListener("astro:before-swap",()=>{s&&s(),u&&u(),s=null,u=null});
