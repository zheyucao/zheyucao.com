const ct="http://www.w3.org/2000/svg",B=document.getElementById("dynamic-background-svg");if(B){let V=function(){if(B&&_){const t=B.getBoundingClientRect();I={width:t.width,height:t.height,left:t.left,top:t.top},_=!1}},lt=function(t){$||t!==m&&(t<1||t>4||(console.log(`%cFPS Monitor: Switching to Performance Level ${t}.`,"color: orange; font-weight: bold;"),m=t,o.enableShapeChanging=t===4,o.enableMouseInteraction=t>=2,o.enableCollisionDetection=t>=3))},p=function(t,n){return Math.random()*(n-t)+t},rt=function(t,n,i,s,u,r){const e=[],c=[],a=[],h=Math.PI*2/r;for(let b=0;b<r;b++){const l=b*h;c.push(l);let d=i+p(-s,s)*i;d+=p(0,u)*i,d=Math.max(i*.2,d),a.push(d),e.push({x:t+Math.cos(l)*d,y:n+Math.sin(l)*d})}return{points:e,angles:c,radii:a}},j=function(t){if(t.length<3)return"";let n=`M ${t[0].x} ${t[0].y}`;const i=t.length;for(let s=0;s<i;s++){const u=t[(s-1+i)%i],r=t[s],e=t[(s+1)%i],c=t[(s+2)%i],a=r.x+(e.x-u.x)/6,h=r.y+(e.y-u.y)/6,b=e.x-(c.x-r.x)/6,l=e.y-(c.y-r.y)/6;n+=` C ${a} ${h}, ${b} ${l}, ${e.x} ${e.y}`}return n+=" Z",n},ht=function(t){if(t=t.replace(/^#/,""),t.length===3&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),t.length!==6)return null;const n=parseInt(t.substring(0,2),16)/255,i=parseInt(t.substring(2,4),16)/255,s=parseInt(t.substring(4,6),16)/255,u=Math.max(n,i,s),r=Math.min(n,i,s);let e=0,c=0;const a=(u+r)/2;if(u===r)e=c=0;else{const h=u-r;switch(c=a>.5?h/(2-u-r):h/(u+r),u){case n:e=(i-s)/h+(i<s?6:0);break;case i:e=(s-n)/h+2;break;case s:e=(n-i)/h+4;break}e/=6}return{h:Math.round(e*360),s:Math.round(c*100),l:Math.round(a*100)}},ut=function(t){for(let n=t.length-1;n>0;n--){const i=Math.floor(Math.random()*(n+1));[t[n],t[i]]=[t[i],t[n]]}return t},ft=function(){L=[],B.innerHTML="",z=document.createElementNS(ct,"g"),B.appendChild(z);const{width:t,height:n}=B.getBoundingClientRect(),i=window.innerWidth,s=Math.max(o.minScaleFactor,Math.min(o.maxScaleFactor,i/o.referenceWidth)),u=o.baseLargeMinBlobSize*s,r=o.baseLargeMaxBlobSize*s,e=o.baseSmallMinBlobSize*s,c=o.baseSmallMaxBlobSize*s;let a=[];const h=Object.keys(N);if(h.length===0)console.error("No color Scheme defined! Using fallback."),a=["#90EE90","#6BCB77","#3CB371","#32CD32","#a0e9c4"];else{const l=h[Math.floor(Math.random()*h.length)];console.log(`Using scheme: ${l}`);const d=N[l]?[...N[l]]:[];if(d.length===0)console.error(`Selected scheme '${l}' is empty. Using fallback.`),a=["#90EE90","#6BCB77","#3CB371","#32CD32","#a0e9c4"];else{const w=ut(d);a=[];for(let g=0;g<o.numBlobs;g++)a.push(w[g%w.length]);w.length<o.numBlobs&&console.warn(`Scheme '${l}' has only ${w.length} colors. Repeating colors for ${o.numBlobs} blobs.`)}}const b=Math.ceil(o.numBlobs/2);for(let l=0;l<b;l++)G(l,u,r,a[l],t,n);for(let l=b;l<o.numBlobs;l++)G(l,e,c,a[l%a.length],t,n)},G=function(t,n,i,s,u,r){const e=p(n/2,i/2),c={x:p(e,u-e),y:p(e,r-e)},a=ht(s);a||console.error(`Invalid initial hex color: ${s}. Skipping blob ${t}.`);const h=rt(0,0,e,.3,.2,8),b=j(h.points),l={x:p(-1,1)*o.speedMultiplier,y:p(-1,1)*o.speedMultiplier},d=p(0,360),w=p(-.15,.15),g=document.createElementNS(ct,"path");g.setAttribute("d",b),a?g.setAttribute("fill",s):g.setAttribute("fill","#808080"),g.setAttribute("transform",`translate(${c.x}, ${c.y}) rotate(${d})`),g.style.opacity=String(o.opacity),z.appendChild(g);const Mt={id:t,pathElement:g,position:c,velocity:l,radius:e,color:s,hsl:a||{h:0,s:0,l:50},points:h.points,angle:d,angularVelocity:w,baseAngles:h.angles,baseRadii:h.radii,deformationTime:0,deformationSpeed:p(.005,.015),deformationAmplitude:e*p(.05,.15),update:function(X,Ft,xt,St){this.deformationTime+=1;const vt=this.position.x,Bt=this.position.y,Dt=this.angle;if(o.enableShapeChanging){const S=[],y=this.baseAngles.length;for(let f=0;f<y;f++){const F=this.baseAngles[f],x=this.baseRadii[f],A=Math.sin(this.deformationTime*this.deformationSpeed+F*3)*this.deformationAmplitude,v=Math.max(x*.3,x+A),k=Math.cos(F)*v,W=Math.sin(F)*v;S.push({x:k,y:W})}const M=j(S);this.pathElement.setAttribute("d",M)}if(this.position.x+=this.velocity.x,this.position.y+=this.velocity.y,this.angle+=this.angularVelocity,o.enableMouseInteraction&&X){const S=this.position.x-X.x,y=this.position.y-X.y,M=S*S+y*y,f=o.mouseInfluenceRadius+this.radius*1.2,F=f*f;if(M<F&&M>0){const x=Math.sqrt(M),A=((f-x)/f)**1.5,v=Math.atan2(y,S);this.velocity.x+=Math.cos(v)*A*o.mouseForce*o.speedMultiplier*5,this.velocity.y+=Math.sin(v)*A*o.mouseForce*o.speedMultiplier*5}}const Y=Math.sqrt(this.velocity.x**2+this.velocity.y**2),O=1.5*o.speedMultiplier;if(Y>O&&(this.velocity.x*=O/Y,this.velocity.y*=O/Y),this.velocity.x*=.99,this.velocity.y*=.99,o.enableCollisionDetection)for(const y of Ft){if(this.id===y.id)continue;const M=y.position.x-this.position.x,f=y.position.y-this.position.y,F=M*M+f*f,x=(this.radius+y.radius)*.5,A=x*x;if(F<A&&F>0){const v=Math.sqrt(F),k=x-v,W=Math.atan2(f,M),At=Math.cos(W)*k*.01,$t=Math.sin(W)*k*.01;this.velocity.x-=At,this.velocity.y-=$t}}const ot=xt,at=St,q=.05*o.speedMultiplier;this.position.x<this.radius&&(this.velocity.x+=q),this.position.x>ot-this.radius&&(this.velocity.x-=q),this.position.y<this.radius&&(this.velocity.y+=q),this.position.y>at-this.radius&&(this.velocity.y-=q),this.position.x=Math.max(this.radius/2,Math.min(ot-this.radius/2,this.position.x)),this.position.y=Math.max(this.radius/2,Math.min(at-this.radius/2,this.position.y));const U=.01,Et=Math.abs(this.velocity.x)<U&&Math.abs(this.velocity.y)<U&&Math.abs(this.angularVelocity)<U,Ct=Math.abs(this.position.x-vt)>.1||Math.abs(this.position.y-Bt)>.1,wt=Math.abs(this.angle-Dt)>.01;!Et&&(Ct||wt)&&this.pathElement.setAttribute("transform",`translate(${this.position.x}, ${this.position.y}) rotate(${this.angle})`)}};L.push(Mt)},Z=function(t){requestAnimationFrame(Z);const n=t-et;if(n<nt)return;et=t-n%nt;const i=t-tt;if(tt=t,!$&&i>0){const r=1e3/i;if(P.push(r),P.length>H&&P.shift(),P.length===H){const e=P.reduce((a,h)=>a+h,0)/H;let c=m;if(e<it?c=1:e<st?c=2:e<mt?c=3:c=4,c===m)T=0;else{let a=!1;c>m?(m===1&&e>=dt||m===2&&e>=pt||m===3&&e>=gt)&&(a=!0):(m===4&&e<bt||m===3&&e<st||m===2&&e<it)&&(a=!0),a?(T++,T>=yt&&(lt(c),T=0)):T=0}}}V();const s=I.width,u=I.height;z&&(E.x+=(D.x-E.x)*K,E.y+=(D.y-E.y)*K,z.setAttribute("transform",`translate(${E.x}, ${E.y})`)),L.forEach(r=>r.update(R,L,s,u))},J=function(){C&&(cancelAnimationFrame(C),C=null),L.length=0,R=null};const $="maxTouchPoints"in navigator&&navigator.maxTouchPoints>0||window.innerWidth<1024,o={numBlobs:$?3:4,baseLargeMinBlobSize:1e3,baseLargeMaxBlobSize:1600,baseSmallMinBlobSize:600,baseSmallMaxBlobSize:1e3,referenceWidth:1440,minScaleFactor:.5,maxScaleFactor:1.5,speedMultiplier:$?.5:1,mouseInfluenceRadius:580,mouseForce:-800,opacity:.8,enableShapeChanging:!1,enableCollisionDetection:!0,enableMouseInteraction:!0};let L=[],R=null,z=null;const D={x:0,y:0},E={x:0,y:0},K=.05,Q=-.03;let I={width:0,height:0,left:0,top:0},_=!0,m=$?1:3;const P=[],H=60;let tt=performance.now(),et=performance.now();const nt=1e3/60,it=30,dt=35,st=40,pt=45,mt=55,gt=55,bt=50;let T=0;const yt=30;B.classList.add("css-hue-shift-active");const N={reds:["#FF6B6B","#FFD93D","#F2bF47","#F2B707","#F28706","#F26430"],oranges:["#FFa700","#FF9B58","#F27149","#F9c443","#faD93D"],yellows:["#FFD700","#FFDB58","#F2E109","#F9D423","#caD93D"],greens:["#90EE90","#6BCB77","#3CB371","#32CD32","#a0e9c4"],cyans:["#40E0D0","#AFEEEE","#7FFFD4","#B3E0F2","#9EfDF2"],blues:["#87CEEB","#64f5ED","#7De6FF","#42d5FF","#7299f9"],forest:["#64f5ED","#F2E109","#32CD32","#32CD32","#a0e9c4"],purples:["#996BcB","#c2aFF7","#8267d7","#FF55ff","#e264d0"],browns:["#8B4513","#A0522D","#D2691E","#DAA520","#8B3030"],winter:["#87CEEB","#64f5ED","#7De6FF","#cccccc","#ffffff"]};let C=null;window.addEventListener("resize",()=>{_=!0}),window.addEventListener("mousemove",t=>{o.enableMouseInteraction&&(C&&cancelAnimationFrame(C),C=requestAnimationFrame(()=>{V();const n=t.clientX,i=t.clientY;R={x:n-I.left,y:i-I.top};const s=window.innerWidth/2,u=window.innerHeight/2;D.x=(n-s)*Q,D.y=(i-u)*Q}))}),window.addEventListener("mouseleave",()=>{R=null,D.x=0,D.y=0}),ft(),requestAnimationFrame(Z),document.addEventListener("astro:before-preparation",J),document.addEventListener("beforeunload",J)}else console.error("Dynamic background SVG container not found.");
