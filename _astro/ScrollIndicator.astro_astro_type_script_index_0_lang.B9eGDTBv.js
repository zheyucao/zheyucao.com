import{A as S}from"./animationConstants.C5dRCtVd.js";import{r as _,g as n,S as p}from"./gsapPlugins.CTnM-_Tl.js";import{p as f}from"./motionPreferences.BL4Q8pbc.js";_();function m(i){const{indicator:e,scroller:t}=i,{SCROLL_INDICATOR:o,GSAP:c}=S;if(f())return n.set(e,{opacity:.6}),()=>{};let l=null,a=null,r=null;const L=n.fromTo(e,{opacity:.6},{opacity:0,immediateRender:!1});l=p.create({trigger:t,scroller:t,start:`${o.SCROLL_TRIGGER_START}px top`,end:`+=${o.SCROLL_TRIGGER_END_OFFSET}`,animation:L,scrub:c.INDICATOR_SCRUB});const d=(I=0)=>{l?.isActive||(r!==null&&clearTimeout(r),r=setTimeout(()=>{t.scrollTop<o.SCROLL_TRIGGER_START&&n.to(e,{opacity:.6,duration:.5,overwrite:!0})},I))},T=()=>{r!==null&&clearTimeout(r),l?.isActive||n.to(e,{opacity:0,duration:o.FADE_OUT_DURATION/1e3,overwrite:!0})};return n.set(e,{opacity:0}),t.scrollTop<o.SCROLL_TRIGGER_START&&d(o.FADE_IN_DELAY),a=p.create({trigger:t,scroller:t,start:`${o.SCROLL_TRIGGER_START}px top`,onEnter:T,onLeaveBack:()=>{t.scrollTop<5?T():d(o.FADE_IN_DELAY)}}),()=>{l&&(l.kill(),l=null),a&&(a.kill(),a=null),r!==null&&(clearTimeout(r),r=null)}}function A(i){const{indicator:e,scroller:t}=i,{SCROLL_INDICATOR:o}=S,c=()=>{if(f()){t.scrollTo({top:t.scrollTop+t.clientHeight,behavior:"auto"});return}parseFloat(window.getComputedStyle(e).opacity)>.1&&n.to(t,{duration:o.SCROLL_DURATION,scrollTo:t.scrollTop+t.clientHeight,ease:"power2.out"})};return e.addEventListener("click",c),()=>{e.removeEventListener("click",c)}}let s=null,u=null;const R=()=>{const i=document.querySelector("#scroll-indicator"),e=document.querySelector(".page-wrapper");i&&e&&(s=m({indicator:i,scroller:e}),u=A({indicator:i,scroller:e}))},g=()=>{s&&s(),u&&u(),s=null,u=null};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",R,{once:!0}):R();window.addEventListener("pagehide",g);
