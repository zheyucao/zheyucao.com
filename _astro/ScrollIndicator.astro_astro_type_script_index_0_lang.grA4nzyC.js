import{A as T}from"./animationConstants.C5dRCtVd.js";import{r as _,g as c,S as d}from"./gsapPlugins.CTnM-_Tl.js";import{p as R}from"./motionPreferences.BL4Q8pbc.js";_();function I(n){const{indicator:t,scroller:e}=n,{SCROLL_INDICATOR:r,GSAP:i}=T;if(R())return c.set(t,{opacity:.6}),()=>{};let o=null,a=null,l=null;const S=c.fromTo(t,{opacity:.6},{opacity:0,immediateRender:!1});o=d.create({trigger:e,scroller:e,start:`${r.SCROLL_TRIGGER_START}px top`,end:`+=${r.SCROLL_TRIGGER_END_OFFSET}`,animation:S,scrub:i.INDICATOR_SCRUB});const s=(f=0)=>{o?.isActive||(l!==null&&clearTimeout(l),l=setTimeout(()=>{e.scrollTop<r.SCROLL_TRIGGER_START&&c.to(t,{opacity:.6,duration:.5,overwrite:!0})},f))},u=()=>{l!==null&&clearTimeout(l),o?.isActive||c.to(t,{opacity:0,duration:r.FADE_OUT_DURATION/1e3,overwrite:!0})};return c.set(t,{opacity:0}),e.scrollTop<r.SCROLL_TRIGGER_START&&s(r.FADE_IN_DELAY),a=d.create({trigger:e,scroller:e,start:`${r.SCROLL_TRIGGER_START}px top`,onEnter:u,onLeaveBack:()=>{e.scrollTop<5?u():s(r.FADE_IN_DELAY)}}),()=>{o&&(o.kill(),o=null),a&&(a.kill(),a=null),l!==null&&(clearTimeout(l),l=null)}}function L(n){const{indicator:t,scroller:e}=n,{SCROLL_INDICATOR:r}=T,i=()=>{if(R()){e.scrollTo({top:e.scrollTop+e.clientHeight,behavior:"auto"});return}parseFloat(window.getComputedStyle(t).opacity)>.1&&c.to(e,{duration:r.SCROLL_DURATION,scrollTo:e.scrollTop+e.clientHeight,ease:"power2.out"})};return t.addEventListener("click",i),()=>{t.removeEventListener("click",i)}}const p=window;if(!p.__scrollIndicatorHandlersRegistered){p.__scrollIndicatorHandlersRegistered=!0;let n=null,t=null;const e=()=>{const i=document.querySelector("#scroll-indicator"),o=document.querySelector(".page-wrapper");i&&o&&(n=I({indicator:i,scroller:o}),t=L({indicator:i,scroller:o}))},r=()=>{n?.(),t?.(),n=null,t=null};document.addEventListener("astro:page-load",e),document.addEventListener("astro:before-swap",r)}
