<!DOCTYPE html><html lang="en" data-astro-cid-sckkx6r4> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><link rel="icon" type="image/png" href="/favicon.png"><meta name="generator" content="Astro v5.7.4"><title>Timeline | Zheyu Cao</title><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><script type="module" src="/_astro/ClientRouter.astro_astro_type_script_index_0_lang.O60KwBJx.js"></script><!-- START Insert Theme Detection Script Here --><script>
      // Simplified: Only check system preference
      const isDarkMode =
        window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)").matches;
      if (isDarkMode) {
        document.documentElement.classList.add("dark");
      } else {
        document.documentElement.classList.remove("dark");
      }
    </script><!-- END Insert Theme Detection Script Here --><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=EB+Garamond:ital,wght@0,400..800;1,400..800&display=swap" rel="stylesheet"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap" rel="stylesheet"><script type="module">const e=window.matchMedia("(prefers-color-scheme: dark)"),d=()=>{e.matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),console.log("[Theme] Applied theme based on prefers-color-scheme:",e.matches?"dark":"light")};e.addEventListener("change",d);document.addEventListener("astro:page-load",d);</script><script type="module" src="/_astro/Layout.astro_astro_type_script_index_1_lang.Bhut5k9b.js"></script><!-- System Theme Handling --><script type="module">let o=null;document.addEventListener("astro:page-load",()=>{o&&o.disconnect();const t=document.querySelector(".page-wrapper");if(!t){console.error("Page wrapper element not found for IntersectionObserver.");return}const s={root:t,rootMargin:"0px",threshold:.2},c=(e,a)=>{e.forEach(r=>{r.isIntersecting&&(r.target.classList.add("visible"),a.unobserve(r.target))})},n=new IntersectionObserver(c,s);o=n,document.querySelectorAll(".scroll-reveal-animate").forEach(e=>{n.observe(e)})});</script><style>.subpage-main[data-astro-cid-ctsmgenv]{padding:2rem 10% 4rem;min-height:60vh;margin-top:2rem}.subpage-header[data-astro-cid-ctsmgenv]{margin-bottom:3rem;padding-bottom:1rem}.back-link-wrapper[data-astro-cid-ctsmgenv]{display:flex;align-items:center;justify-content:center;height:2.4rem;width:2.4rem;border-radius:8px;border:1px solid var(--button-border-color);margin-bottom:1.5rem;transition:border-color .2s ease,background-color .2s ease}.back-link-wrapper[data-astro-cid-ctsmgenv]:hover{border:1px solid var(--button-border-hover-color);background-color:var(--button-hover-bg)}.back-link[data-astro-cid-ctsmgenv]{display:flex;align-items:center;justify-content:center;text-decoration:none;font-family:var(--font-family-sans);width:100%;height:100%}.back-link-icon[data-astro-cid-ctsmgenv]{font-size:.9rem}.subpage-title[data-astro-cid-ctsmgenv]{font-size:clamp(2rem,2rem + 2vw,4rem);font-weight:600;margin:0;line-height:1.2;color:var(--text-color)}.subpage-content[data-astro-cid-ctsmgenv]{font-size:1.2rem;line-height:1.6}.back-link-wrapper[data-astro-cid-ctsmgenv]{vertical-align:top}.back-link-wrapper[data-astro-cid-ctsmgenv].page-load-initial-state{animation:pageLoadAnimate .8s ease-out 0s forwards}.subpage-title[data-astro-cid-ctsmgenv].page-load-initial-state{animation:pageLoadAnimate .8s ease-out .1s forwards}.subpage-content[data-astro-cid-ctsmgenv].page-load-initial-state{animation:pageLoadAnimate .8s ease-out .2s forwards}
.timeline-event{position:relative;padding-left:3rem;padding-bottom:2.5rem;list-style:none}.timeline-event:not(.is-last):before{content:"";position:absolute;left:11px;top:.5rem;bottom:-.5rem;width:2px;background-color:var(--timeline-line-color);transform:translate(-50%)}.timeline-marker{position:absolute;left:11px;top:.5rem;width:.5rem;height:.5rem;background-color:var(--timeline-marker-bg-color);border-radius:50%;transform:translate(-50%);z-index:1}.timeline-header{margin-bottom:.5rem}.timeline-date{font-family:var(--font-family-sans);color:var(--text-muted);font-size:.9rem;display:block;margin-bottom:.25rem}.timeline-title{font-size:1.3rem;font-weight:600;margin:0;color:var(--heading-color);display:block;margin-bottom:.4rem}.timeline-category{font-family:var(--font-family-sans);font-size:.8rem;padding:.15em .6em;background-color:var(--tag-bg-color);color:var(--tag-text-color);border-radius:4px;text-transform:uppercase;letter-spacing:.5px;display:inline-block}.timeline-description{font-size:1.1rem;line-height:1.7}.timeline-controls[data-astro-cid-qlh7ngej]{margin-bottom:3rem;display:flex;flex-wrap:wrap;gap:1.5rem;align-items:center}.control-group[data-astro-cid-qlh7ngej]{display:flex;flex-wrap:wrap;gap:.8rem;align-items:center}.control-group[data-astro-cid-qlh7ngej] label[data-astro-cid-qlh7ngej]{font-weight:500;margin-right:.5rem;color:var(--text-muted)}.controls-note[data-astro-cid-qlh7ngej]{font-size:.85rem;color:var(--text-muted);width:100%;text-align:right;margin:.5rem 0 0}.timeline-container[data-astro-cid-qlh7ngej]{padding:0;margin:0}.category-tabs[data-astro-cid-qlh7ngej]{gap:.5rem 0rem;font-family:var(--font-family-sans)}.category-tab[data-astro-cid-qlh7ngej]{font-family:inherit;font-size:1rem;padding:.5em 1em .8em;border:none;border-bottom-width:3px;border-bottom-style:solid;border-bottom-color:transparent;background-color:transparent;color:var(--text-muted);cursor:pointer;transition:all .2s ease;margin-bottom:-1px}.category-tab[data-astro-cid-qlh7ngej]:hover{border-bottom-color:var(--button-border-color);color:var(--text-color)}.category-tab[data-astro-cid-qlh7ngej][aria-pressed=true]{border-bottom-color:var(--button-border-hover-color);color:var(--text-color);font-weight:600}#sort-toggle[data-astro-cid-qlh7ngej]{font-family:inherit;font-size:.9rem;padding:.4em .9em;border-radius:6px;border:1px solid var(--button-border-hover-color);background-color:var(--button-hover-bg);color:var(--button-hover-text);font-weight:500;cursor:pointer;transition:all .2s ease}#sort-toggle[data-astro-cid-qlh7ngej]:hover{border-color:var(--button-border-color);background-color:transparent;color:var(--text-muted)}@keyframes fadeOut{0%{opacity:1}to{opacity:0}}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}.timeline-container[data-astro-cid-qlh7ngej]{transition:opacity .3s ease-out;padding:0;margin:0}.timeline-container[data-astro-cid-qlh7ngej].is-updating{opacity:0}@media (prefers-reduced-motion: reduce){.timeline-container[data-astro-cid-qlh7ngej],.timeline-container[data-astro-cid-qlh7ngej].is-updating{transition:none;animation:none;opacity:1}}
</style>
<link rel="stylesheet" href="/_astro/contact.DSjbyiGW.css"><script type="module" src="/_astro/page.CPvyyiTs.js"></script></head> <body data-astro-cid-sckkx6r4> <div class="page-wrapper" data-astro-cid-sckkx6r4> <div id="dynamic-background-container" data-astro-transition-persist="true" data-astro-cid-3oonqpbe> <svg id="dynamic-background-svg" width="100%" height="100%" data-astro-cid-3oonqpbe></svg> </div> <script type="module" src="/_astro/DynamicBackground.astro_astro_type_script_index_0_lang.CJNpjTFo.js"></script>  <main class="main-content" data-astro-cid-sckkx6r4>  <main class="subpage-main" data-astro-cid-ctsmgenv> <div class="subpage-header" data-astro-cid-ctsmgenv> <span class="back-link-wrapper page-load-initial-state" data-astro-cid-ctsmgenv> <a href="/" class="back-link" data-astro-cid-ctsmgenv> <svg width="1em" height="1em" class="back-link-icon" data-astro-cid-ctsmgenv="true" data-icon="ri:arrow-left-line">   <symbol id="ai:ri:arrow-left-line" viewBox="0 0 24 24"><path fill="currentColor" d="M7.828 11H20v2H7.828l5.364 5.364l-1.414 1.414L4 12l7.778-7.778l1.414 1.414z"/></symbol><use href="#ai:ri:arrow-left-line"></use>  </svg> </a> </span> <h1 class="subpage-title page-load-initial-state" data-astro-cid-ctsmgenv>Timeline</h1> </div> <div class="subpage-content page-load-initial-state" data-astro-cid-ctsmgenv>  <div class="timeline-controls" data-astro-cid-qlh7ngej> <div class="control-group category-tabs" data-astro-cid-qlh7ngej> <button type="button" class="category-tab" data-category="all" aria-pressed="true" data-astro-cid-qlh7ngej>All</button> <button type="button" class="category-tab" data-category="Experiences" data-astro-cid-qlh7ngej> Experiences </button><button type="button" class="category-tab" data-category="Honors" data-astro-cid-qlh7ngej> Honors </button> </div> <!-- <div class="control-group">
      <button type="button" id="sort-toggle" data-sort-current="newest">Newest First</button>
    </div> --> </div> <ul class="timeline-container mt-8" data-astro-cid-qlh7ngej>  <li class="timeline-event"> <div class="timeline-marker"></div> <div class="timeline-content"> <div class="timeline-header"> <span class="timeline-date">2024-11</span> <h3 class="timeline-title">China National Scholarship</h3> <!-- {category && <span class="timeline-category">{category}</span>} --> </div> <div class="timeline-description"><p>Awarded the prestigious China National Scholarship for academic excellence.</p></div> </div> </li><li class="timeline-event"> <div class="timeline-marker"></div> <div class="timeline-content"> <div class="timeline-header"> <span class="timeline-date">2024-11</span> <h3 class="timeline-title">NPU Outstanding Student &amp; First-Class Scholarship</h3> <!-- {category && <span class="timeline-category">{category}</span>} --> </div> <div class="timeline-description"><p>Recognized as an Outstanding Student and awarded the First-Class Scholarship at NPU.</p></div> </div> </li><li class="timeline-event"> <div class="timeline-marker"></div> <div class="timeline-content"> <div class="timeline-header"> <span class="timeline-date">2024-11</span> <h3 class="timeline-title">China Robot Contest: National First Prize</h3> <!-- {category && <span class="timeline-category">{category}</span>} --> </div> <div class="timeline-description"><p>Achieved the National First Prize in the China Robot Contest.</p></div> </div> </li><li class="timeline-event"> <div class="timeline-marker"></div> <div class="timeline-content"> <div class="timeline-header"> <span class="timeline-date">2024-10</span> <h3 class="timeline-title">China Robot Championship: National First Prize</h3> <!-- {category && <span class="timeline-category">{category}</span>} --> </div> <div class="timeline-description"><p>Achieved the National First Prize in the China Robot Championship.</p></div> </div> </li><li class="timeline-event"> <div class="timeline-marker"></div> <div class="timeline-content"> <div class="timeline-header"> <span class="timeline-date">July 2024 – September 2024</span> <h3 class="timeline-title">NLP Research Internship</h3> <!-- {category && <span class="timeline-category">{category}</span>} --> </div> <div class="timeline-description"><p>Completed a research internship at Westlake University NLP Lab, focusing on LLM prompting and reasoning under <a href="https://frcchang.github.io/" target="_blank">Prof. Yue Zhang</a>.</p></div> </div> </li><li class="timeline-event"> <div class="timeline-marker"></div> <div class="timeline-content"> <div class="timeline-header"> <span class="timeline-date">2024-08</span> <h3 class="timeline-title">Team V5++ Leader</h3> <!-- {category && <span class="timeline-category">{category}</span>} --> </div> <div class="timeline-description"><p>Took on a leadership role for the Team V5++ of the NPU Soccer Robot Innovation Base, overseeing operations and technical direction.</p></div> </div> </li><li class="timeline-event"> <div class="timeline-marker"></div> <div class="timeline-content"> <div class="timeline-header"> <span class="timeline-date">September 2023 – June 2024</span> <h3 class="timeline-title">Innovation Program Project</h3> <!-- {category && <span class="timeline-category">{category}</span>} --> </div> <div class="timeline-description"><p>Participated in and completed the National College Innovation & Entrepreneurship Training Program project on UAV Hyperspectral Image Recognition, achieving a 'Good' standing.</p></div> </div> </li><li class="timeline-event"> <div class="timeline-marker"></div> <div class="timeline-content"> <div class="timeline-header"> <span class="timeline-date">2024-05</span> <h3 class="timeline-title">China Robot Contest: National First Prize</h3> <!-- {category && <span class="timeline-category">{category}</span>} --> </div> <div class="timeline-description"><p>Achieved the National First Prize in the China Robot Contest.</p></div> </div> </li><li class="timeline-event"> <div class="timeline-marker"></div> <div class="timeline-content"> <div class="timeline-header"> <span class="timeline-date">2023-11</span> <h3 class="timeline-title">NPU Outstanding Student &amp; Second-Class Scholarship</h3> <!-- {category && <span class="timeline-category">{category}</span>} --> </div> <div class="timeline-description"><p>Recognized as an Outstanding Student and awarded the Second-Class Scholarship at NPU.</p></div> </div> </li><li class="timeline-event"> <div class="timeline-marker"></div> <div class="timeline-content"> <div class="timeline-header"> <span class="timeline-date">2023-10</span> <h3 class="timeline-title">China Robot Contest: National Second Prize</h3> <!-- {category && <span class="timeline-category">{category}</span>} --> </div> <div class="timeline-description"><p>Achieved the National Second Prize in the China Robot Contest.</p></div> </div> </li><li class="timeline-event"> <div class="timeline-marker"></div> <div class="timeline-content"> <div class="timeline-header"> <span class="timeline-date">2023-05</span> <h3 class="timeline-title">Joined Team V5++</h3> <!-- {category && <span class="timeline-category">{category}</span>} --> </div> <div class="timeline-description"><p>Joined the <strong>Team V5++</strong> of the NPU Soccer Robot Innovation Base, focusing on <em>Robotic Vision</em>.</p></div> </div> </li><li class="timeline-event is-last"> <div class="timeline-marker"></div> <div class="timeline-content"> <div class="timeline-header"> <span class="timeline-date">2022-09</span> <h3 class="timeline-title">Started University</h3> <!-- {category && <span class="timeline-category">{category}</span>} --> </div> <div class="timeline-description"><p>Began undergraduate studies in Computer Science and Technology at Northwestern Polytechnical University.</p></div> </div> </li> </ul>   </div> </main>  </main> <div class="some-empty-space" style="height: 20vh;" data-astro-cid-sckkx6r4></div> <footer class="site-footer" data-astro-cid-sz7xmlte> <div class="footer-content" data-astro-cid-sz7xmlte> <div class="footer-column footer-column-1" data-astro-cid-sz7xmlte> <h4 data-astro-cid-sz7xmlte>Zheyu Cao</h4> <p class="footer-description" data-astro-cid-sz7xmlte>
Currently a third-year student at Northwestern Polytechnical University, pursuing a
        Bachelor's degree in Computer Science and Technology.
</p> <p class="copyright" data-astro-cid-sz7xmlte>&copy; 2025 Zheyu Cao. All rights reserved.</p> </div> <div class="footer-column footer-column-2" data-astro-cid-sz7xmlte> <h4 data-astro-cid-sz7xmlte>Links</h4> <ul data-astro-cid-sz7xmlte> <li data-astro-cid-sz7xmlte><a href="/" data-astro-prefetch data-astro-cid-sz7xmlte>Home</a></li> <li data-astro-cid-sz7xmlte><a href="/timeline" data-astro-prefetch data-astro-cid-sz7xmlte>Timeline</a></li> <li data-astro-cid-sz7xmlte><a href="/projects" data-astro-prefetch data-astro-cid-sz7xmlte>Projects</a></li> <li data-astro-cid-sz7xmlte><a href="/resume" data-astro-prefetch data-astro-cid-sz7xmlte>Résumé</a></li> <li data-astro-cid-sz7xmlte><a href="/contact" data-astro-prefetch data-astro-cid-sz7xmlte>Contact</a></li> </ul> </div> <div class="footer-column footer-column-3" data-astro-cid-sz7xmlte> <h4 data-astro-cid-sz7xmlte>Connect</h4> <ul data-astro-cid-sz7xmlte> <li data-astro-cid-sz7xmlte> <a class="link" href="https://github.com/zheyu-cao" target="_blank" rel="noopener noreferrer" data-astro-cid-sz7xmlte>GitHub</a> </li> <li data-astro-cid-sz7xmlte> <a class="link" href="mailto:zheyucao2004@gmail.com" target="_blank" rel="noopener noreferrer" data-astro-cid-sz7xmlte>Email</a> </li> </ul> </div> </div> </footer>  <script type="module">function s(){const n=window.location.pathname,i="/"+n.replace(/^\/+|\/+$/g,""),o="/";document.querySelectorAll(".footer-column-2 ul li a").forEach(a=>{const t=a.getAttribute("href"),e=a.closest("li");if(!t||!e)return;const c="/"+t.replace(/^\/+|\/+$/g,"");e.classList.remove("active"),(t===o&&(n===o||n==="/index.html")||t!==o&&t.startsWith("/")&&!t.includes("#")&&c===i)&&e.classList.add("active")})}document.addEventListener("astro:page-load",s);</script> <script type="module" src="/_astro/Footer.astro_astro_type_script_index_1_lang.Cu-Gk-lV.js"></script>   </div> </body></html>   <script>(function(){const allEvents = [{"date":"2024-11","title":"China National Scholarship","category":"Honors","isHighlight":true,"description":"<p>Awarded the prestigious China National Scholarship for academic excellence.</p>","highlightSummary":"Awarded the prestigious <strong>China National Scholarship</strong> for academic excellence."},{"date":"2024-11","title":"NPU Outstanding Student & First-Class Scholarship","category":"Honors","description":"<p>Recognized as an Outstanding Student and awarded the First-Class Scholarship at NPU.</p>"},{"date":"2024-11","title":"China Robot Contest: National First Prize","category":"Honors","description":"<p>Achieved the National First Prize in the China Robot Contest.</p>"},{"date":"2024-10","title":"China Robot Championship: National First Prize","category":"Honors","description":"<p>Achieved the National First Prize in the China Robot Championship.</p>"},{"date":"2024-09","dateRange":"July 2024 – September 2024","title":"NLP Research Internship","category":"Experiences","description":"<p>Completed a research internship at Westlake University NLP Lab, focusing on LLM prompting and reasoning under <a href=\"https://frcchang.github.io/\" target=\"_blank\">Prof. Yue Zhang</a>.</p>","isHighlight":true,"highlightSummary":"Research internship at <strong>Westlake University NLP Lab</strong>, focusing on <em>LLM prompting</em> and <em>reasoning</em> under <a href=\"https://frcchang.github.io/\" target=\"_blank\">Prof. Yue Zhang</a>."},{"date":"2024-08","title":"Team V5++ Leader","category":"Experiences","isHighlight":true,"description":"<p>Took on a leadership role for the Team V5++ of the NPU Soccer Robot Innovation Base, overseeing operations and technical direction.</p>","highlightSummary":"Became the <strong>leader</strong> of <em>Team V5++</em> of NPU Soccer Robot Innovation Base."},{"date":"2024-06","dateRange":"September 2023 – June 2024","title":"Innovation Program Project","category":"Experiences","description":"<p>Participated in and completed the National College Innovation & Entrepreneurship Training Program project on UAV Hyperspectral Image Recognition, achieving a 'Good' standing.</p>"},{"date":"2024-05","title":"China Robot Contest: National First Prize","category":"Honors","description":"<p>Achieved the National First Prize in the China Robot Contest.</p>"},{"date":"2023-11","title":"NPU Outstanding Student & Second-Class Scholarship","category":"Honors","description":"<p>Recognized as an Outstanding Student and awarded the Second-Class Scholarship at NPU.</p>"},{"date":"2023-10","title":"China Robot Contest: National Second Prize","category":"Honors","description":"<p>Achieved the National Second Prize in the China Robot Contest.</p>"},{"date":"2023-05","title":"Joined Team V5++","category":"Experiences","description":"<p>Joined the <strong>Team V5++</strong> of the NPU Soccer Robot Innovation Base, focusing on <em>Robotic Vision</em>.</p>"},{"date":"2022-09","title":"Started University","category":"Experiences","description":"<p>Began undergraduate studies in Computer Science and Technology at Northwestern Polytechnical University.</p>"}];

  // console.log("[Timeline Script] Executing script block."); // Log 1: Script execution start

  // State variables
  let currentFilter = "all";
  let currentSort = "newest"; // 'newest' or 'oldest'

  // DOM References (potential issue if run before DOM ready on navigation)
  // We will re-query these inside astro:page-load
  // const categoryTabs = document.querySelectorAll(".category-tab");
  // const sortToggleButton = document.getElementById("sort-toggle");
  // const timelineContainer = document.querySelector(".timeline-container");
  let categoryTabs = null; // Initialize as null
  let sortToggleButton = null;
  let timelineContainer = null;
  const allEventsData = allEvents; // Get data passed from server

  // console.log("[Timeline Script] Script block executed, waiting for astro:page-load."); // Log: Script block done

  // Helper to format YYYY-MM to Month Year
  function formatTimelineDate(dateStr) {
    if (!dateStr || !dateStr.includes("-")) return dateStr; // Return original if invalid
    const [year, month] = dateStr.split("-");
    const dateObj = new Date(parseInt(year), parseInt(month) - 1); // Month is 0-indexed
    return dateObj.toLocaleString("en-US", { month: "long", year: "numeric" });
  }

  async function renderTimeline() {
    // console.log(
    //   `[Timeline Script] renderTimeline START - Filter: ${currentFilter}, Sort: ${currentSort}`
    // ); // Log 5: renderTimeline start
    // Ensure container is valid (queried in astro:page-load)
    if (!timelineContainer || !allEventsData) {
      console.warn(
        "[Timeline Script] renderTimeline ABORT - Missing container or data. Container:", // Keep important warning
        timelineContainer
      );
      return;
    }

    // 1. Add fade-out class
    timelineContainer.classList.add("is-updating");

    // Wait for CSS transition
    await new Promise((resolve) => setTimeout(resolve, 300));

    // 2. Filter
    let filteredEvents = allEventsData;
    if (currentFilter !== "all") {
      filteredEvents = allEventsData.filter((event) => event.category === currentFilter);
    }

    // 3. Sort
    filteredEvents.sort((a, b) => {
      // Ensure date comparison handles potential non-standard formats robustly
      const dateA = new Date(a.date.includes("-") ? a.date : `${a.date}-01-01`); // Assume year if no month/day
      const dateB = new Date(b.date.includes("-") ? b.date : `${b.date}-01-01`);
      // Fallback to 0 if dates are invalid
      const timeA = isNaN(dateA.getTime()) ? 0 : dateA.getTime();
      const timeB = isNaN(dateB.getTime()) ? 0 : dateB.getTime();

      return currentSort === "newest" ? timeB - timeA : timeA - timeB;
    });

    // 4. Generate HTML
    let timelineHTML = "";
    filteredEvents.forEach((event, index) => {
      const isLast = index === filteredEvents.length - 1;
      const displayDate = event.dateRange ? event.dateRange : formatTimelineDate(event.date);
      const descriptionHTML = event.description
        ? `<div class="timeline-description">${event.description}</div>`
        : "";

      timelineHTML += `
        <li class="timeline-event ${isLast ? "is-last" : ""}">
          <div class="timeline-marker"></div>
          <div class="timeline-content">
            <div class="timeline-header">
              <span class="timeline-date">${displayDate}</span>
              <h3 class="timeline-title">${event.title}</h3>
              <!-- ${event.category ? `<span class="timeline-category">${event.category}</span>` : ""} -->
            </div>
            ${descriptionHTML}
          </div>
        </li>
      `;
    });

    // 5. Update DOM
    timelineContainer.innerHTML = timelineHTML;

    // 6. Remove fade-out class
    timelineContainer.classList.remove("is-updating");
    // console.log(`[Timeline Script] renderTimeline END - DOM updated.`); // Log 5: renderTimeline end

    // 7. Dispatch event to re-initialize footer animation
    function reinitFooterAnimation() {
      // console.log("[Timeline Script] Dispatching refresh-footer-animation event after transition"); // Removed log
      document.dispatchEvent(new CustomEvent("refresh-footer-animation"));
    }
    // Use a flag to prevent adding multiple listeners if renderTimeline is called rapidly
    if (!timelineContainer.hasAttribute("data-transition-listener-added")) {
      const handleTransitionEnd = (event) => {
        if (event.target === timelineContainer && event.propertyName === "opacity") {
          reinitFooterAnimation();
          // Clean up listener and flag
          timelineContainer.removeEventListener("transitionend", handleTransitionEnd);
          timelineContainer.removeAttribute("data-transition-listener-added");
          // console.log("[Timeline Script] TransitionEnd listener removed."); // Removed log
        }
      };
      timelineContainer.addEventListener("transitionend", handleTransitionEnd);
      timelineContainer.setAttribute("data-transition-listener-added", "true"); // Set flag
      // console.log("[Timeline Script] TransitionEnd listener added."); // Removed log
    }
  }

  // Define handler function outside for potential removal (though Astro lifecycle handles this better)
  const handleCategoryClick = async (e) => {
    // console.log("[Timeline Script] Category tab clicked!", e.currentTarget); // Log 4: Click handler start
    if (e.currentTarget instanceof HTMLElement) {
      const target = e.currentTarget;
      const category = target.dataset.category;
      // console.log(
      //   `[Timeline Script] Clicked category: ${category}, Current filter: ${currentFilter}`
      // ); // Log 4: Category info
      if (category && category !== currentFilter) {
        currentFilter = category;
        updateCategoryTabStates(); // Update immediately
        // console.log("[Timeline Script] Calling renderTimeline from tab click."); // Log 4: Calling render
        await renderTimeline();
      } else {
        // console.log("[Timeline Script] Click ignored - category same or invalid."); // Log 4: Click ignored
      }
    }
  };

  // --- Event Listeners Setup (called within astro:page-load) ---
  function setupEventListeners() {
    // console.log("[Timeline Script] Setting up event listeners..."); // Removed log
    if (!categoryTabs) {
      console.error("[Timeline Script] Cannot setup listeners: categoryTabs not found."); // Keep error
      return;
    }
    categoryTabs.forEach((tab) => {
      if (!(tab instanceof HTMLElement)) return;
      // Remove listener first (important for astro:page-load)
      tab.removeEventListener("click", handleCategoryClick);
      // Add the listener
      tab.addEventListener("click", handleCategoryClick);
      // console.log(`[Timeline Script] Added click listener to tab ${index + 1}:`, tab); // Removed log
    });

    // Setup sort toggle listener (if element exists)
    if (sortToggleButton) {
      // Define handler
      const handleSortClick = async () => {
        // console.log("[Timeline Script] Sort toggle clicked!"); // Removed log
        const previousSort = currentSort;
        currentSort = currentSort === "newest" ? "oldest" : "newest";
        if (previousSort !== currentSort) {
          updateSortToggleState(); // Update UI
          // console.log("[Timeline Script] Calling renderTimeline from sort click."); // Removed log
          await renderTimeline();
        }
      };
      // Remove previous listener & add new one
      sortToggleButton.removeEventListener("click", handleSortClick);
      sortToggleButton.addEventListener("click", handleSortClick);
      // console.log("[Timeline Script] Added click listener to sort toggle."); // Removed log
    } else {
      // console.log("[Timeline Script] Sort toggle button not found, skipping listener."); // Removed log
    }
    // console.log("[Timeline Script] Event listeners setup complete."); // Removed log
  }

  // --- Helper for Control States ---
  function updateCategoryTabStates() {
    if (!categoryTabs) return; // Guard against null
    // console.log(`[Timeline Script] Updating category tab states. Active: ${currentFilter}`); // Removed log
    categoryTabs.forEach((tab) => {
      if (!(tab instanceof HTMLElement)) return;
      if (tab.dataset.category === currentFilter) {
        tab.setAttribute("aria-pressed", "true");
      } else {
        tab.removeAttribute("aria-pressed");
      }
    });
  }

  function updateSortToggleState() {
    if (!sortToggleButton) return; // Guard against null
    // console.log(`[Timeline Script] Updating sort toggle state. Current: ${currentSort}`); // Removed log
    sortToggleButton.dataset.sortCurrent = currentSort;
    sortToggleButton.textContent = currentSort === "newest" ? "Newest First" : "Oldest First";
  }

  // --- Initialization Logic (called within astro:page-load) ---
  function initializeTimeline() {
    // console.log("[Timeline Script] initializeTimeline START"); // Log 2: Initialize start

    // Query DOM elements *inside* initialization, as they might change with VT
    categoryTabs = document.querySelectorAll(".category-tab");
    sortToggleButton = document.getElementById("sort-toggle");
    timelineContainer = document.querySelector(".timeline-container");

    // console.log(
    //   `[Timeline Script] DOM Refs queried: categoryTabs=${categoryTabs?.length}, sortToggle=${!!sortToggleButton}, container=${!!timelineContainer}`
    // ); // Removed log

    if (!timelineContainer || !categoryTabs || categoryTabs.length === 0) {
      console.error(
        "[Timeline Script] initializeTimeline ABORT - Essential elements not found in DOM." // Keep error
      );
      return;
    }

    // Set initial state based on what's rendered (or defaults)
    // Note: The initial state might need smarter logic if SSR state needs to be preserved across navigation
    currentFilter = "all"; // Reset to default or read from persisted state if implemented
    currentSort = "newest"; // Reset to default

    // Render based on initial state (will also update tab/button UI via helpers)
    renderTimeline(); // Initial render based on default/reset state
    updateCategoryTabStates(); // Ensure UI matches state
    updateSortToggleState(); // Ensure UI matches state
    setupEventListeners(); // Setup listeners *after* initial state & render

    // console.log("[Timeline Script] initializeTimeline END"); // Log 2: Initialize end
  }

  // --- Astro Lifecycle Integration ---
  document.addEventListener("astro:page-load", () => {
    // console.log("[Timeline Script] astro:page-load event fired."); // Removed log
    // Reset filter/sort state on navigation? Or try to persist? For now, reset.
    // currentFilter = "all"; // State reset is now handled inside initializeTimeline
    // currentSort = "newest";
    // console.log("[Timeline Script] State reset on page load."); // Removed log
    initializeTimeline(); // Run the initialization logic on every page load
  });

  // Initial load handling (for non-VT initial visit)
  // astro:page-load also fires on initial load, so this might be redundant
  // but let's keep it simple and rely only on astro:page-load
  // console.log(
  //   "[Timeline Script] Script loaded. Initialization will occur on astro:page-load event."
  // ); // Removed log
})();</script> 